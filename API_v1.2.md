# API 文档

##一，程序逻辑部分的类与函数介绍：

###class dot:点类

init(x, y):初始化

add(dot offset):两点坐标相加

copy():复制该点

tolist():转化成列表（绘图用）

distance_square(dot other):（计算两点平方和）

###class AI_player:ai类，需要各位在此基础上派生，一些具体的参数见第二部分

init(num, ball, wall, bul, human, gre):初始化

getdata(num, ball, wall, bul, human, gre):传入参数，其中num为玩家编号，ball为核弹对象，wall、bul、human、gre为墙、子弹、人、炸弹列表（list）

analysis():决策过程，返回值为一个五元组
（0,0,0,False,False)，分别代表操作种类（1,2,3,4，对应后面），旋转角，移动距离，是否开火，是否扔炸弹。

###class Ball:核弹类，顶在头上

init(position):位置

human_crash():返回值为bool，代表是否被人拾起

update():更新位置或者所属的人

###class Bullets:子弹类

init(p,v):位置和速度

crash_into_humans(newposition):判断新的位置是否击中人

move():移动并判断是否该消失（撞墙、出界）

###class Grenades:炸弹，范围伤害，随着范围增加伤害逐渐减小

init(p,v):位置和速度

adjust():调整方向，遇墙和边界反弹

explode():判断是否爆炸，如果爆炸，人员掉血

move():移动

###class Humans:人员类

init(p,r,n):位置，转角（x轴为0度，顺时针旋转），编号

move(length):移动指定距离

rotate(r):旋转指定角度

shoot():如果可以开火就开火，返回是否开火成功

grenade():如果可以扔炸弹就扔炸弹，返回是否扔成功

update():更新开火时间，判断生命值，如果非正则随机选地点重生

###def offset_of_rotation(l,r):

该函数将以角度形式表示的转角（取值0-360）和一个长度值l转换为相应坐标偏移量。即向r角度方向运动l距离，返回值为一个点坐标。

###def position_valid(position, radius):

该函数判断圆心在position、半径为radius的圆是否与墙和屏幕边界相交，如果相交返回false，否则返回true

###def draw_human(screen, human):

在屏幕上画一个人

###def build_human(i):

初始化一个编号为i的人，坐标和转角随机选取，返回一个人员类

###def build_wall(i):

初始化一个编号为i的墙，宽度固定，长度和位置随机选取，返回墙的矩形类
（共有十堵墙）

###def build_ball():

初始化一个核弹，位置随机

###def Run_game():

游戏主体部分，包括初始化、游戏循环两部分。游戏循环中先进行ai决策，再进行人、子弹、炸弹的移动和人生命值的更新，最后绘图。

###def test():

不要在意这段代码，这段代码仅供调试用


##二，一些参数和设置：

1.本程序使用了pygame库来作图，运行程序请先安装pygame库。

2.一些参数和设置需要注意:（在程序前十几行可以看到参数，参数可以协调修改）

每次循环为一次绘图间隔，称为“最小间隔”。那么，ai决策和人执行决策（运动、旋转、开火）的间隔为20个最小间隔。子弹移动的间隔为4个最小间隔。

人的初始生命值为100，死亡后会立刻在随机位置（保证合法）重生。

人的开火间隔为250个最小间隔。

人每次重生后有三个炸弹。

人移动的最大速度为 4每20个间隔（比子弹慢了一点点）

人旋转的最大速度为 10度每20个间隔

子弹和炸弹的速度为 1每4个间隔

炸弹爆炸时间为 200 * 4个间隔

炸弹伤害为范围伤害：距离炸弹中心10,20,30,40,50距离内的伤害分别为50,40,30,20,10.


屏幕尺寸为800*600.人的半径为10.墙宽30.炸弹和子弹半径为5.核弹的半径为8.

###三，还需要做的事情

1.墙的随机创立我写的很草率，会出现不连通的情况，建议修改为之前在unity中的算法，修改方法为：修改build_wall函数。

2.添加血条（现在使用的是数字显示）

3.添加评分机制。

4.美工，现在图形太丑了。

5.各参数设置的优化。